<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸€ì“°ê¸° ì—°ìŠµ - Writing Practice</title>
    <link rel="stylesheet" href="writing-styles.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-items-container">
            <div class="nav-item" onclick="window.location.href='index.html'">ì˜¤ëŠ˜ì˜ í•™ìŠµ</div>
            <div class="nav-item" onclick="window.location.href='analysis.html'">ë¶„ì„ë¦¬í¬íŠ¸</div>
            <div class="nav-item">ë² ìŠ¤íŠ¸ ë¦¬ë¼ì´íŒ…</div>
            <div class="nav-item" onclick="window.location.href='mypage.html'">ë§ˆì´í˜ì´ì§€</div>
        </div>
        <div class="nav-icon">[â†’</div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <!-- Writing Prompt Section -->
        <section class="prompt-section">
            <div class="prompt-container">
                <h1 class="main-title">ê¸€ì“°ê¸° ì—°ìŠµ</h1>
                <p class="title-description">
                    ì£¼ì–´ì§„ ì£¼ì œì— ëŒ€í•´ 300ì ë‚´ì™¸ë¡œ ììœ ë¡­ê²Œ ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”. 
                    ìƒê°ì„ ì •ë¦¬í•˜ê³  í‘œí˜„í•˜ëŠ” ëŠ¥ë ¥ì„ ê¸°ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
                
                <!-- Topic Display -->
                <div class="topic-card">
                    <div class="topic-label">ì˜¤ëŠ˜ì˜ ì£¼ì œ</div>
                    <h2 class="topic-title" id="currentTopic">ì£¼ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h2>
                    <p class="topic-description" id="topicDescription">
                        ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...
                    </p>
                </div>

                <!-- New Topic Button -->
                <button class="new-topic-btn" onclick="generateNewTopic()">
                    <svg class="refresh-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    ìƒˆë¡œìš´ ì£¼ì œ
                </button>
            </div>
        </section>

        <!-- Writing Area Section -->
        <section class="writing-section">
            <div class="writing-container">
                <div class="writing-header">
                    <h3 class="writing-title">ê¸€ì“°ê¸° ì˜ì—­</h3>
                    <div class="word-counter">
                        <span class="current-count" id="currentCount">0</span>
                        <span class="target-count">/ 300ì</span>
                    </div>
                </div>
                
                <div class="writing-area">
                    <textarea 
                        id="writingTextarea" 
                        placeholder="ì—¬ê¸°ì— ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”..."
                        maxlength="500"
                    ></textarea>
                    
                    <!-- Progress Bar -->
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-labels">
                            <span class="progress-label">0ì</span>
                            <span class="progress-label">150ì</span>
                            <span class="progress-label">300ì</span>
                        </div>
                    </div>
                </div>

                <!-- Writing Tips -->
                <div class="writing-tips">
                    <h4 class="tips-title">ğŸ’¡ ê¸€ì“°ê¸° íŒ</h4>
                    <ul class="tips-list">
                        <li>ì£¼ì œì— ëŒ€í•œ ìì‹ ì˜ ìƒê°ì„ ëª…í™•íˆ ì •ë¦¬í•´ë³´ì„¸ìš”</li>
                        <li>êµ¬ì²´ì ì¸ ì˜ˆì‹œë‚˜ ê²½í—˜ì„ í¬í•¨í•˜ë©´ ë” ì¢‹ìŠµë‹ˆë‹¤</li>
                        <li>ì„œë¡ , ë³¸ë¡ , ê²°ë¡ ì˜ êµ¬ì¡°ë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”</li>
                        <li>300ì ë‚´ì™¸ë¡œ ì‘ì„±í•˜ë˜, ë‚´ìš©ì´ ì™„ì„±ë„ ìˆê²Œ ë§ˆë¬´ë¦¬ë˜ë„ë¡ í•˜ì„¸ìš”</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="save-btn" onclick="saveWriting()">
                <svg class="save-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                </svg>
                ì„ì‹œì €ì¥
            </button>
            <button class="submit-btn" onclick="goToAnalysis()">
                <svg class="submit-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                ë¶„ì„í•˜ê¸°
            </button>
        </div>

        <!-- Writing History -->
        <section class="history-section">
            <h3 class="history-title">ìµœê·¼ ì‘ì„±í•œ ê¸€</h3>
            <div class="history-list" id="historyList">
                <div class="history-item">
                    <div class="history-topic">ì¸ê³µì§€ëŠ¥ê³¼ ì¸ê°„ì˜ ê´€ê³„</div>
                    <div class="history-date">2024.01.15</div>
                    <div class="history-count">287ì</div>
                </div>
                <div class="history-item">
                    <div class="history-topic">í™˜ê²½ë³´í˜¸ì˜ ì¤‘ìš”ì„±</div>
                    <div class="history-date">2024.01.14</div>
                    <div class="history-count">312ì</div>
                </div>
            </div>
        </section>
    </main>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ê¸€ì“°ê¸° ì™„ë£Œ! ğŸ‰</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>í›Œë¥­í•œ ê¸€ì„ ì‘ì„±í•˜ì…¨ìŠµë‹ˆë‹¤!</p>
                <p>ë¶„ì„ ë¦¬í¬íŠ¸ë¥¼ í™•ì¸í•´ë³´ì‹œê² ì–´ìš”?</p>
            </div>
            <div class="modal-actions">
                <button class="modal-btn secondary" onclick="closeModal()">ë‚˜ì¤‘ì—</button>
                <button class="modal-btn primary" onclick="goToAnalysis(); closeModal();">ë¶„ì„ë³´ê¸°</button>
            </div>
        </div>
    </div>

    <script src="writing-script.js"></script>
    
    <!-- Test script for writing page -->
    <script>
        console.log('Writing page script loaded!');
        console.log('Current URL:', window.location.href);
        
        // Test if textarea exists
        setTimeout(() => {
            const textarea = document.getElementById('writingTextarea');
            console.log('Textarea found:', textarea);
            
            if (textarea) {
                console.log('Textarea value:', textarea.value);
                
                // Add event listener to textarea
                textarea.addEventListener('input', function() {
                    console.log('Textarea changed:', this.value);
                });
            }
        }, 1000);
        
        // Test function to manually trigger analysis
        window.testGoToAnalysis = function() {
            console.log('Manual test: goToAnalysis called');
            const textarea = document.getElementById('writingTextarea');
            const text = textarea ? textarea.value : 'í…ŒìŠ¤íŠ¸ ê¸€ì…ë‹ˆë‹¤.';
            
            // Get current topic from the page
            const currentTopicElement = document.getElementById('currentTopic');
            const topic = currentTopicElement ? currentTopicElement.textContent : 'í…ŒìŠ¤íŠ¸ ì£¼ì œ';
            
            console.log('Test text:', text);
            console.log('Test topic:', topic);
            
            if (text.trim()) {
                const encodedText = encodeURIComponent(text);
                const encodedTopic = encodeURIComponent(topic);
                const url = `analysis.html?text=${encodedText}&topic=${encodedTopic}`;
                console.log('Test URL:', url);
                window.location.href = url;
            }
        };
        
        // Simple test function
        window.simpleTest = function() {
            console.log('Simple test function called!');
            const textarea = document.getElementById('writingTextarea');
            if (textarea) {
                textarea.value = 'í…ŒìŠ¤íŠ¸ ê¸€ì…ë‹ˆë‹¤.';
                console.log('Textarea value set to:', textarea.value);
            }
        };
        
        console.log('Test functions available: testGoToAnalysis(), simpleTest()');
    </script>
</body>
</html>
